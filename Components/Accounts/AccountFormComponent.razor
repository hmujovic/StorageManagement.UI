@inherits AccountCreateAndUpdateViewModel

<MudDialog Style="width:inherit">
    <DialogContent>
        <MudCard>
            <MudCardContent Style="max-height:450px; overflow-y:scroll">
                <MudTextField Label="Vorname" Required RequiredError=@ValidationMessage
                              @bind-Value="Account.FirstName" For="@(() => Account.FirstName)"/>
                <MudTextField Label="Nachname" Class="mt-3" Required RequiredError=@ValidationMessage
                              @bind-Value="Account.LastName" For="@(() => Account.LastName)"/>
                <MudTextField Label="E-Mail" Class="mt-3" Required RequiredError=@ValidationMessage
                              @bind-Value="Account.Email" For="@(() => Account.Email)"/>
                <MudTextField Label="Straße und Hausnummer" Class="mt-3"
                              @bind-Value="Account.Address" For="@(() => Account.Address)"/>
                <MudTextField Label="Ort" Class="mt-3"
                              @bind-Value="Account.City" For="@(() => Account.City)"/>
                @if (IsAdmin)
                {
                    <MudSelect Class="mt-3" T="CompanyDto" Required RequiredError=@ValidationMessage Label="Organisation" @bind-Value="@SelectedCompany">
                        @foreach (var company in Companies)
                        {
                            <MudSelectItem Value="@company">@company.Name</MudSelectItem>
                        }
                    </MudSelect>
                }
            </MudCardContent>
        </MudCard>
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Error" OnClick="() => Cancel()">Abbrechen</MudButton>
        <MudButton ButtonType="ButtonType.Submit" Disabled="@IsDisabled" Variant="Variant.Filled" Color="Color.Tertiary" OnClick="() => CreateOrUpdateAsync(Account)">Speichern</MudButton>
    </DialogActions>
</MudDialog>

@code{

    private bool IsDisabled
    {
        get
        {
            if (string.IsNullOrEmpty(Account!.FirstName))
                return true;
            return string.IsNullOrEmpty(Account.LastName)
                   || string.IsNullOrEmpty(Account.Email);
        }
    }
}